{"version":3,"file":"Toolbar.js","sources":["../src/internal/useDeprecationNotiveForTooltip.ts","../src/internal/stopPropagation.ts","../src/components/Toolbar/OverflowPopover.tsx","../src/components/Toolbar/Toolbar.jss.ts","../src/components/Toolbar/index.tsx"],"sourcesContent":["import { deprecationNotice } from '@ui5/webcomponents-react-base/dist/Utils';\nimport { useEffect } from 'react';\n\nexport const useDeprecationNoticeForTooltip = (component, tooltip) => {\n  useEffect(() => {\n    if (tooltip) {\n      deprecationNotice(component, '`tooltip` has been deprecated, please use the native `title` attribute instead.');\n    }\n  }, [tooltip]);\n};\n","export const stopPropagation = (e) => {\n  e.stopPropagation();\n  e.stopImmediatePropagation?.();\n};\n","import '@ui5/webcomponents-icons/dist/overflow.js';\nimport { ButtonDesign } from '@ui5/webcomponents-react/dist/ButtonDesign';\nimport { PopoverPlacementType } from '@ui5/webcomponents-react/dist/PopoverPlacementType';\nimport { Popover, PopoverDomRef } from '@ui5/webcomponents-react/dist/Popover';\nimport { ToggleButton } from '@ui5/webcomponents-react/dist/ToggleButton';\nimport React, { FC, ReactElement, ReactNode, Ref, useCallback, useEffect, useRef, useState } from 'react';\nimport { createPortal } from 'react-dom';\nimport { stopPropagation } from '../../internal/stopPropagation';\n\ninterface OverflowPopoverProps {\n  lastVisibleIndex: number;\n  contentClass: string;\n  children: ReactNode;\n  portalContainer: Element;\n  overflowContentRef: Ref<HTMLDivElement>;\n  numberOfAlwaysVisibleItems?: number;\n  showMoreText: string;\n}\n\nexport const OverflowPopover: FC<OverflowPopoverProps> = (props: OverflowPopoverProps) => {\n  const {\n    lastVisibleIndex,\n    contentClass,\n    children,\n    portalContainer,\n    overflowContentRef,\n    numberOfAlwaysVisibleItems,\n    showMoreText\n  } = props;\n  const popoverRef = useRef<PopoverDomRef>();\n  const [pressed, setPressed] = useState(false);\n\n  const handleToggleButtonClick = useCallback(\n    (e) => {\n      e.stopPropagation();\n      if (popoverRef.current) {\n        if (!pressed) {\n          popoverRef.current.showAt(e.target);\n          setPressed(true);\n        } else {\n          popoverRef.current.close();\n        }\n      }\n    },\n    [pressed]\n  );\n\n  useEffect(() => {\n    return () => {\n      if (popoverRef.current) {\n        popoverRef.current.close();\n      }\n    };\n  }, []);\n\n  const handleClose = useCallback(\n    (e) => {\n      stopPropagation(e);\n      setPressed(false);\n    },\n    [setPressed]\n  );\n\n  const renderChildren = useCallback(() => {\n    return React.Children.toArray(\n      (children as ReactElement)?.type === React.Fragment ? (children as ReactElement).props.children : children\n    ).map((item: ReactElement<any>, index) => {\n      if (index > lastVisibleIndex && index > numberOfAlwaysVisibleItems - 1) {\n        if ((item.type as any).displayName === 'ToolbarSeparator') {\n          return React.cloneElement(item, {\n            style: {\n              height: '0.0625rem',\n              margin: '0.375rem 0.1875rem',\n              width: '100%'\n            }\n          });\n        }\n        return item;\n      }\n      return null;\n    });\n  }, [children, lastVisibleIndex]);\n\n  return (\n    <>\n      <ToggleButton\n        design={ButtonDesign.Transparent}\n        icon=\"overflow\"\n        onClick={handleToggleButtonClick}\n        pressed={pressed}\n        accessibleName={showMoreText}\n      />\n      {createPortal(\n        <Popover placementType={PopoverPlacementType.Bottom} ref={popoverRef} onAfterClose={handleClose} hideArrow>\n          <div className={contentClass} ref={overflowContentRef}>\n            {renderChildren()}\n          </div>\n        </Popover>,\n        portalContainer\n      )}\n    </>\n  );\n};\n","import { CssSizeVariables } from '@ui5/webcomponents-react-base/dist/CssSizeVariables';\nimport { ThemingParameters } from '@ui5/webcomponents-react-base/dist/ThemingParameters';\n\nexport const styles = {\n  outerContainer: {\n    boxSizing: 'border-box',\n    width: '100%',\n    maxWidth: '100%',\n    height: CssSizeVariables.sapWcrToolbarHeight,\n    position: 'relative',\n    overflow: 'hidden',\n    display: 'flex',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    borderBottom: `solid 0.0625rem ${ThemingParameters.sapGroup_TitleBorderColor}`\n  },\n  hasOverflow: {\n    '& $toolbar': {\n      maxWidth: 'calc(100% - 44px)'\n    }\n  },\n  clear: {\n    borderBottom: 'none'\n  },\n  active: {\n    cursor: 'pointer',\n    '&:active': {\n      backgroundColor: ThemingParameters.sapActiveColor\n    },\n    '&:hover': {\n      backgroundColor: ThemingParameters.sapList_Hover_Background\n    }\n  },\n  info: {\n    // This color is most similar to darken(@sapUiBaseColor, 10)\n    backgroundColor: ThemingParameters.sapList_HeaderBorderColor,\n    '&$active': {\n      backgroundColor: ThemingParameters.sapInfobar_Active_Background,\n      '&:active': {\n        backgroundColor: `${ThemingParameters.sapInfobar_Active_Background}`\n      },\n      '&:hover': {\n        backgroundColor: ThemingParameters.sapInfobar_Hover_Background\n      }\n    }\n  },\n  solid: {\n    backgroundColor: ThemingParameters.sapBackgroundColor\n  },\n  transparent: {\n    backgroundColor: ThemingParameters.sapToolbar_Background\n  },\n  toolbar: {\n    width: '100%',\n    '& >:first-child:not(.spacer)': {\n      margin: '0 0.25rem 0 0'\n    },\n    '& >:last-child:not(.spacer)': {\n      margin: '0 0.5rem 0 0.25rem'\n    },\n    '& > *:not(first-child):not(last-child):not(.spacer)': {\n      margin: '0 0.25rem'\n    },\n    display: 'flex',\n    alignItems: 'center',\n    maxWidth: '100%'\n  },\n  overflowButtonContainer: {\n    marginRight: '0.5rem'\n  },\n  popoverContent: {\n    maxWidth: '20rem',\n    padding: CssSizeVariables.sapWcrToolbarPopoverContentPadding,\n    display: 'flex',\n    flexDirection: 'column',\n    '& [ui5-button]': {\n      marginBottom: '0.25rem'\n    },\n    '& [ui5-button]::part(button)': {\n      justifyContent: 'flex-start'\n    },\n    '& :last-child': {\n      marginBottom: 0\n    }\n  },\n  childContainer: { display: 'flex' }\n};\n","import { createUseStyles } from 'react-jss';\nimport { useSyncRef, useI18nBundle, useIsomorphicLayoutEffect } from '@ui5/webcomponents-react-base/dist/hooks';\nimport { debounce, enrichEventWithDetails } from '@ui5/webcomponents-react-base/dist/Utils';\nimport { SHOW_MORE } from '@ui5/webcomponents-react/dist/assets/i18n/i18n-defaults';\nimport { CommonProps } from '@ui5/webcomponents-react/interfaces/CommonProps';\nimport { ToolbarDesign } from '@ui5/webcomponents-react/dist/ToolbarDesign';\nimport { ToolbarStyle } from '@ui5/webcomponents-react/dist/ToolbarStyle';\nimport React, {\n  cloneElement,\n  createRef,\n  forwardRef,\n  ReactElement,\n  ReactFragment,\n  ReactNode,\n  Ref,\n  RefObject,\n  useCallback,\n  useEffect,\n  useMemo,\n  useRef,\n  useState\n} from 'react';\nimport { useDeprecationNoticeForTooltip } from '../../internal/useDeprecationNotiveForTooltip';\nimport { OverflowPopover } from './OverflowPopover';\nimport { styles } from './Toolbar.jss';\nimport clsx from 'clsx';\n\nconst useStyles = createUseStyles(styles, { name: 'Toolbar' });\n\nexport interface ToolbarPropTypes extends Omit<CommonProps, 'onClick'> {\n  /**\n   * Defines the content of the `Toolbar`.\n   */\n  children?: ReactNode | ReactNode[] | ReactFragment;\n  /**\n   * Defines the visual style of the `Toolbar`.<br />\n   * <b>Note:</b> The visual styles are theme-dependent.\n   */\n  toolbarStyle?: ToolbarStyle | keyof typeof ToolbarStyle;\n  /**\n   * Defines the `Toolbar` design.<br />\n   * <b>Note:</b> Design settings are theme-dependent.\n   */\n  design?: ToolbarDesign | keyof typeof ToolbarDesign;\n  /**\n   * Indicates that the whole `Toolbar` is clickable. The Press event is fired only if `active` is set to true.\n   */\n  active?: boolean;\n  /**\n   * Sets the components outer HTML tag.\n   *\n   * __Note:__ For TypeScript the types of `ref` are bound to the default tag name, if you change it you are responsible to set the respective types yourself.\n   */\n  as?: keyof HTMLElementTagNameMap;\n  /**\n   * Defines where modals are rendered into via `React.createPortal`.\n   *\n   * Defaults to: `document.body`\n   */\n  portalContainer?: Element;\n  /**\n   * Defines the number of items inside the toolbar which should always be visible.\n   * _E.g.: `numberOfAlwaysVisibleItems={3}` would always show the first three items, no matter the size of the toolbar._\n   *\n   * __Note__: To preserve the intended design, it's not recommended to overwrite the `min-width` when using this prop.\n   */\n  numberOfAlwaysVisibleItems?: number;\n  /**\n   * Fired when the user clicks on the `Toolbar`, if the `active` prop is set to \"true\".\n   */\n  onClick?: (event: CustomEvent) => void;\n  /**\n   * Fired when the content of the overflow popover has changed.\n   */\n  onOverflowChange?: (event: {\n    toolbarElements: HTMLElement[];\n    overflowElements: HTMLCollection;\n    target: HTMLElement;\n  }) => void;\n}\n\nconst OVERFLOW_BUTTON_WIDTH = 32 + 8;\n\n/**\n * Horizontal container most commonly used to display buttons, labels, selects and various other input controls.\n *\n * The content of the `Toolbar` moves into the overflow area from right to left when the available space is not enough in the visible area of the container.\n * It can be accessed by the user through the overflow button that opens it in a popover.\n */\nconst Toolbar = forwardRef((props: ToolbarPropTypes, ref: Ref<HTMLDivElement>) => {\n  const {\n    children,\n    toolbarStyle,\n    design,\n    active,\n    style,\n    tooltip,\n    className,\n    onClick,\n    slot,\n    as,\n    portalContainer,\n    numberOfAlwaysVisibleItems,\n    onOverflowChange,\n    ...rest\n  } = props;\n\n  useDeprecationNoticeForTooltip('Toolbar', props.tooltip);\n\n  const classes = useStyles();\n  const [componentRef, outerContainer] = useSyncRef<HTMLDivElement>(ref);\n  const controlMetaData = useRef([]);\n  const [lastVisibleIndex, setLastVisibleIndex] = useState<number>(null);\n  const contentRef = useRef(null);\n  const overflowContentRef = useRef(null);\n  const overflowBtnRef = useRef(null);\n  const [minWidth, setMinWidth] = useState('0');\n\n  const i18nBundle = useI18nBundle('@ui5/webcomponents-react');\n  const showMoreText = i18nBundle.getText(SHOW_MORE);\n\n  const toolbarClasses = clsx(\n    classes.outerContainer,\n    toolbarStyle === ToolbarStyle.Clear && classes.clear,\n    active && classes.active,\n    design === ToolbarDesign.Solid && classes.solid,\n    design === ToolbarDesign.Transparent && classes.transparent,\n    design === ToolbarDesign.Info && classes.info,\n    className\n  );\n\n  const childrenWithRef = useMemo(() => {\n    controlMetaData.current = [];\n\n    const refactoredChildren = React.Children.toArray(children).map((child, index) => {\n      if ((child as ReactElement).type === React.Fragment) {\n        return (child as ReactElement).props.children.filter(Boolean).map((item, itemIndex: number) => {\n          return cloneElement(item, { key: `.${index}:${itemIndex}` });\n        });\n      }\n      return child;\n    });\n\n    return refactoredChildren.flat().map((item: ReactElement, index) => {\n      const itemRef: RefObject<HTMLDivElement> = createRef();\n\n      controlMetaData.current.push({\n        ref: itemRef\n      });\n\n      // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n      if ((item?.type as any)?.displayName === 'ToolbarSpacer') {\n        return item;\n      }\n      return (\n        <div ref={itemRef} key={index} className={classes.childContainer} data-component-name=\"ToolbarChildContainer\">\n          {item}\n        </div>\n      );\n    });\n  }, [children, controlMetaData, classes.childContainer]);\n\n  const overflowNeeded =\n    (lastVisibleIndex || lastVisibleIndex === 0) &&\n    React.Children.count(childrenWithRef) !== lastVisibleIndex + 1 &&\n    numberOfAlwaysVisibleItems < React.Children.count(children);\n\n  useEffect(() => {\n    let lastElementResizeObserver;\n    const lastElement = contentRef.current.children[numberOfAlwaysVisibleItems - 1];\n    if (numberOfAlwaysVisibleItems && overflowNeeded && lastElement) {\n      lastElementResizeObserver = new ResizeObserver(\n        debounce(() => {\n          setMinWidth(`${lastElement.getBoundingClientRect().right + OVERFLOW_BUTTON_WIDTH}px`);\n        }, 200)\n      );\n      lastElementResizeObserver.observe(contentRef.current);\n    }\n    return () => {\n      lastElementResizeObserver?.disconnect();\n    };\n  }, [numberOfAlwaysVisibleItems, overflowNeeded]);\n\n  const requestAnimationFrameRef = useRef<undefined | number>();\n  const calculateVisibleItems = useCallback(() => {\n    requestAnimationFrameRef.current = requestAnimationFrame(() => {\n      if (!outerContainer.current) return;\n      const availableWidth = outerContainer.current.getBoundingClientRect().width;\n      let consumedWidth = 0;\n      let lastIndex = null;\n      let lastFitWidth = 0;\n\n      if (availableWidth - OVERFLOW_BUTTON_WIDTH <= 0) {\n        lastIndex = -1;\n        lastFitWidth = 0;\n      } else {\n        controlMetaData.current.forEach((item, index) => {\n          const currentMeta = controlMetaData.current[index] as { ref: RefObject<HTMLElement> };\n          if (currentMeta && currentMeta.ref && currentMeta.ref.current) {\n            let nextWidth = currentMeta.ref.current.getBoundingClientRect().width;\n            nextWidth += index === 0 || index === controlMetaData.current.length - 1 ? 4 : 8; // first & last element = padding: 4px\n            if (index === controlMetaData.current.length - 1) {\n              if (consumedWidth + nextWidth <= availableWidth - 8) {\n                lastIndex = index;\n                lastFitWidth = consumedWidth + nextWidth;\n              }\n            } else {\n              if (consumedWidth + nextWidth <= availableWidth - OVERFLOW_BUTTON_WIDTH) {\n                lastIndex = index;\n                lastFitWidth = consumedWidth + nextWidth;\n              }\n              if (\n                consumedWidth < availableWidth - OVERFLOW_BUTTON_WIDTH &&\n                consumedWidth + nextWidth >= availableWidth - OVERFLOW_BUTTON_WIDTH\n              ) {\n                lastIndex = index - 1;\n                lastFitWidth = 0;\n              }\n            }\n            consumedWidth += nextWidth;\n          }\n        });\n      }\n      setLastVisibleIndex(lastIndex);\n    });\n  }, [outerContainer.current, controlMetaData.current, setLastVisibleIndex, childrenWithRef, overflowNeeded]);\n\n  const observer = useRef(new ResizeObserver(calculateVisibleItems));\n\n  useEffect(() => {\n    if (outerContainer.current) {\n      observer.current.observe(outerContainer.current);\n    }\n    return () => {\n      cancelAnimationFrame(requestAnimationFrameRef.current);\n      observer.current.disconnect();\n    };\n  }, [outerContainer.current]);\n\n  useIsomorphicLayoutEffect(() => {\n    calculateVisibleItems();\n  }, [calculateVisibleItems]);\n\n  const handleToolbarClick = useCallback(\n    (e) => {\n      if (active && typeof onClick === 'function') {\n        onClick(enrichEventWithDetails(e));\n      }\n    },\n    [onClick, active]\n  );\n\n  useEffect(() => {\n    if (lastVisibleIndex !== null && typeof onOverflowChange === 'function') {\n      const toolbarChildren = contentRef.current?.children;\n      let toolbarElements = [];\n      const overflowElements = overflowContentRef.current?.children;\n      if (toolbarChildren?.length > 0) {\n        toolbarElements = Array.from(toolbarChildren).filter((item, index) => index <= lastVisibleIndex);\n      }\n      onOverflowChange({\n        toolbarElements: toolbarElements,\n        overflowElements: overflowElements,\n        target: outerContainer.current\n      });\n    }\n  }, [lastVisibleIndex]);\n  const CustomTag = as as React.ElementType;\n  const styleWithMinWidth = minWidth !== '0' ? { minWidth: minWidth, ...style } : style;\n  return (\n    <CustomTag\n      title={tooltip}\n      style={styleWithMinWidth}\n      className={clsx(toolbarClasses, overflowNeeded && classes.hasOverflow)}\n      ref={componentRef}\n      slot={slot}\n      onClick={handleToolbarClick}\n      {...rest}\n    >\n      <div className={classes.toolbar} data-component-name=\"ToolbarContent\" ref={contentRef}>\n        {overflowNeeded &&\n          React.Children.map(childrenWithRef, (item, index) => {\n            if (index >= lastVisibleIndex + 1 && index > numberOfAlwaysVisibleItems - 1) {\n              return React.cloneElement(item as ReactElement, { style: { visibility: 'hidden' } });\n            }\n            return item;\n          })}\n        {!overflowNeeded && childrenWithRef}\n      </div>\n      {overflowNeeded && (\n        <div\n          ref={overflowBtnRef}\n          className={classes.overflowButtonContainer}\n          title={showMoreText}\n          data-component-name=\"ToolbarOverflowButtonContainer\"\n        >\n          <OverflowPopover\n            lastVisibleIndex={lastVisibleIndex}\n            contentClass={classes.popoverContent}\n            portalContainer={portalContainer}\n            overflowContentRef={overflowContentRef}\n            numberOfAlwaysVisibleItems={numberOfAlwaysVisibleItems}\n            showMoreText={showMoreText}\n          >\n            {React.Children.toArray(children).map((child) => {\n              if ((child as ReactElement).type === React.Fragment) {\n                return (child as ReactElement).props.children;\n              }\n              return child;\n            })}\n          </OverflowPopover>\n        </div>\n      )}\n    </CustomTag>\n  );\n});\n\nToolbar.defaultProps = {\n  as: 'div',\n  toolbarStyle: ToolbarStyle.Standard,\n  design: ToolbarDesign.Auto,\n  active: false,\n  portalContainer: document.body,\n  numberOfAlwaysVisibleItems: 0\n};\n\nToolbar.displayName = 'Toolbar';\nexport { Toolbar };\n"],"names":["useDeprecationNoticeForTooltip","component","tooltip","useEffect","deprecationNotice","stopPropagation","e","stopImmediatePropagation","OverflowPopover","props","lastVisibleIndex","contentClass","children","portalContainer","overflowContentRef","numberOfAlwaysVisibleItems","showMoreText","popoverRef","useRef","useState","pressed","setPressed","handleToggleButtonClick","useCallback","current","showAt","target","close","handleClose","renderChildren","React","Children","toArray","type","Fragment","map","item","index","displayName","cloneElement","style","height","margin","width","ButtonDesign","Transparent","createPortal","PopoverPlacementType","Bottom","styles","outerContainer","boxSizing","maxWidth","CssSizeVariables","sapWcrToolbarHeight","position","overflow","display","justifyContent","alignItems","borderBottom","ThemingParameters","sapGroup_TitleBorderColor","hasOverflow","clear","active","cursor","backgroundColor","sapActiveColor","sapList_Hover_Background","info","sapList_HeaderBorderColor","sapInfobar_Active_Background","sapInfobar_Hover_Background","solid","sapBackgroundColor","transparent","sapToolbar_Background","toolbar","overflowButtonContainer","marginRight","popoverContent","padding","sapWcrToolbarPopoverContentPadding","flexDirection","marginBottom","childContainer","useStyles","createUseStyles","name","OVERFLOW_BUTTON_WIDTH","Toolbar","forwardRef","ref","toolbarStyle","design","className","onClick","slot","as","onOverflowChange","rest","classes","useSyncRef","componentRef","controlMetaData","setLastVisibleIndex","contentRef","overflowBtnRef","minWidth","setMinWidth","i18nBundle","useI18nBundle","getText","SHOW_MORE","toolbarClasses","clsx","ToolbarStyle","Clear","ToolbarDesign","Solid","Info","childrenWithRef","useMemo","refactoredChildren","child","filter","Boolean","itemIndex","key","flat","itemRef","createRef","push","overflowNeeded","count","lastElementResizeObserver","lastElement","ResizeObserver","debounce","getBoundingClientRect","right","observe","disconnect","requestAnimationFrameRef","calculateVisibleItems","requestAnimationFrame","availableWidth","consumedWidth","lastIndex","forEach","currentMeta","nextWidth","length","observer","cancelAnimationFrame","useIsomorphicLayoutEffect","handleToolbarClick","enrichEventWithDetails","toolbarChildren","toolbarElements","overflowElements","Array","from","CustomTag","styleWithMinWidth","visibility","defaultProps","Standard","Auto","document","body"],"mappings":"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"}