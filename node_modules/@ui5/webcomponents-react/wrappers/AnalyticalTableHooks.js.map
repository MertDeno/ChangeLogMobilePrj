{"version":3,"file":"AnalyticalTableHooks.js","sources":["../src/components/AnalyticalTable/util/index.ts","../src/components/AnalyticalTable/pluginHooks/useRowDisableSelection.tsx","../src/components/AnalyticalTable/pluginHooks/useIndeterminateRowSelection.tsx"],"sourcesContent":["import { defaultOrderByFn } from 'react-table';\n\nexport const orderByFn = (rows, functions, directions) => {\n  const wrapSortFn = (sortFn, index) => {\n    const desc = directions[index] === false || directions[index] === 'desc';\n\n    return (rowA, rowB) => {\n      if (rowA.original?.emptyRow && !rowB.original?.emptyRow) {\n        return desc ? -1 : 1;\n      }\n      if (!rowA.original?.emptyRow && rowB.original?.emptyRow) {\n        return desc ? 1 : -1;\n      }\n      if (rowA.original?.emptyRow && rowB.original?.emptyRow) {\n        return 0;\n      }\n      return sortFn(rowA, rowB);\n    };\n  };\n\n  const wrappedSortfunctions = functions.map(wrapSortFn);\n\n  return defaultOrderByFn(rows, wrappedSortfunctions, directions);\n};\n\n// copied from https://github.com/tannerlinsley/react-table/blob/f97fb98509d0b27cc0bebcf3137872afe4f2809e/src/utils.js#L320-L347 (13. Jan 2021)\nconst reOpenBracket = /\\[/g;\nconst reCloseBracket = /\\]/g;\n\nfunction makePathArray(obj) {\n  return (\n    flattenDeep(obj)\n      // remove all periods in parts\n      .map((d) => String(d).replace('.', '_'))\n      // join parts using period\n      .join('.')\n      // replace brackets with periods\n      .replace(reOpenBracket, '.')\n      .replace(reCloseBracket, '')\n      // split it back out on periods\n      .split('.')\n  );\n}\n\nfunction flattenDeep(arr, newArr = []) {\n  if (!Array.isArray(arr)) {\n    newArr.push(arr);\n  } else {\n    for (let i = 0; i < arr.length; i += 1) {\n      flattenDeep(arr[i], newArr);\n    }\n  }\n  return newArr;\n}\n\n// copied from https://github.com/tannerlinsley/react-table/blob/master/src/utils.js#L169-L191 (13.Jan 2021)\nconst pathObjCache = new Map();\n\nexport function getBy(obj, path, def) {\n  if (!path) {\n    return obj;\n  }\n  const cacheKey = typeof path === 'function' ? path : JSON.stringify(path);\n\n  const pathObj =\n    pathObjCache.get(cacheKey) ||\n    (() => {\n      const pathObj = makePathArray(path);\n      pathObjCache.set(cacheKey, pathObj);\n      return pathObj;\n    })();\n  let val;\n\n  try {\n    val = pathObj.reduce((cursor, pathPart) => {\n      return cursor[pathPart];\n    }, obj);\n  } catch (e) {\n    // continue regardless of error\n  }\n  return typeof val !== 'undefined' ? val : def;\n}\n\nexport const tagNamesWhichShouldNotSelectARow = new Set([\n  'UI5-AVATAR',\n  'UI5-BUTTON',\n  'UI5-CALENDAR',\n  'UI5-CHECKBOX',\n  'UI5-COLOR-PICKER',\n  'UI5-COMBOBOX',\n  'UI5-DATE-PICKER',\n  'UI5-DATERANGE-PICKER',\n  'UI5-DATETIME-PICKER',\n  'UI5-DURATION-PICKER',\n  'UI5-FILE-UPLOADER',\n  'UI5-ICON',\n  'UI5-INPUT',\n  'UI5-LINK',\n  'UI5-MULTI-COMBOBOX',\n  'UI5-MULTI-INPUT',\n  'UI5-RADIO-BUTTON',\n  'UI5-RANGE-SLIDER',\n  'UI5-RATING-INDICATOR',\n  'UI5-SEGMENTED-BUTTON',\n  'UI5-SELECT',\n  'UI5-SLIDER',\n  'UI5-STEP-INPUT',\n  'UI5-SWITCH',\n  'UI5-TEXT-AREA',\n  'UI5-TIME-PICKER',\n  'UI5-TOGGLE-BUTTON',\n  'UI5-UPLOAD-COLLECTION'\n]);\n","import { CheckBox } from '@ui5/webcomponents-react/dist/CheckBox';\nimport { TableSelectionMode } from '@ui5/webcomponents-react/dist/TableSelectionMode';\nimport React from 'react';\nimport { getBy } from '../util';\n\ntype DisableRowSelectionType = string | ((row: Record<any, any>) => boolean);\n\nconst customCheckBoxStyling = {\n  verticalAlign: 'middle'\n};\n\nconst headerProps = (\n  props,\n  {\n    instance: {\n      webComponentsReactProperties: { selectionMode }\n    }\n  }\n) => {\n  if (props.key === 'header___ui5wcr__internal_selection_column' && selectionMode === TableSelectionMode.MultiSelect) {\n    return [props, { onClick: undefined, onKeyDown: undefined }];\n  }\n  return props;\n};\n\nconst columns = (columns) => {\n  return columns.map((column) => {\n    if (column.id === '__ui5wcr__internal_selection_column') {\n      return {\n        ...column,\n        Cell: (instance) => {\n          const { webComponentsReactProperties, row } = instance;\n          if (row.disableSelect === true) {\n            if (row.isGrouped && webComponentsReactProperties.selectionMode === TableSelectionMode.SingleSelect) {\n              return null;\n            }\n            if (webComponentsReactProperties.selectionMode === TableSelectionMode.SingleSelect) {\n              return <div onClick={undefined} data-name=\"internal_selection_column\" />;\n            }\n            return (\n              <CheckBox\n                {...row.getToggleRowSelectedProps()}\n                disabled\n                style={customCheckBoxStyling}\n                data-name=\"internal_selection_column\"\n                tabIndex={-1}\n              />\n            );\n          }\n          return column.Cell(instance);\n        },\n        Header: () => null\n      };\n    }\n    return column;\n  });\n};\n\n/**\n * A plugin hook for disabling row selection of specific rows.\n * __Note:__ The \"Select All\" checkbox is not available with this hook.\n *\n * @param disableRowSelection - Can be either a `string` or a `function`. `string:` Defines the key in the dataset for disabling rows. If the value of the key is `true`, then the row will not be selectable. `function:` Programmatically disable rows for selection. The function receives the current row as parameter.\n */\nexport const useRowDisableSelection = (disableRowSelection: DisableRowSelectionType) => {\n  const disableRowAccessor =\n    typeof disableRowSelection === 'function'\n      ? disableRowSelection\n      : (d) => getBy(d.original, disableRowSelection, undefined);\n  const getRowProps = (rowProps, { row, instance }) => {\n    const { webComponentsReactProperties } = instance;\n    if (disableRowAccessor(row) === true) {\n      row.disableSelect = true;\n      return { ...rowProps, onClick: undefined, className: webComponentsReactProperties.classes.tr };\n    }\n    return rowProps;\n  };\n\n  const columnDeps = (deps) => {\n    return [...deps, disableRowSelection];\n  };\n\n  const useDisableSelectionRow = (hooks) => {\n    hooks.getHeaderProps.push(headerProps);\n    hooks.getRowProps.push(getRowProps);\n    hooks.columns.push(columns);\n    hooks.columnsDeps.push(columnDeps);\n  };\n\n  useDisableSelectionRow.pluginName = 'useRowDisableSelection';\n\n  return useDisableSelectionRow;\n};\n","import React, { useEffect } from 'react';\nimport { TableSelectionBehavior } from '@ui5/webcomponents-react/dist/TableSelectionBehavior';\nimport { TableSelectionMode } from '@ui5/webcomponents-react/dist/TableSelectionMode';\nconst getParentIndicesRecursive = (rowId) => {\n  const parentIndices = {};\n  const getParentIndices = (internalRowId) => {\n    const lastDotIndex = internalRowId.lastIndexOf('.');\n    if (~lastDotIndex) {\n      const parentRowId = internalRowId.slice(0, lastDotIndex);\n      if (!parentIndices[parentRowId]) {\n        parentIndices[parentRowId] = true;\n        getParentIndices(parentRowId);\n      }\n    }\n  };\n  getParentIndices(rowId);\n  return parentIndices;\n};\n\n/**\n * A plugin hook that marks parent rows as indeterminate if a child row is selected in `MultiSelect` mode.\n * When using this hook, it is recommended to also select all sub-rows when selecting a row. (`reactTableOptions={{ selectSubRows: true }}`)\n */\nexport const useIndeterminateRowSelection = () => {\n  const toggleRowProps = (rowProps, { row, instance }) => {\n    let indeterminate;\n    if (instance.isAllRowsSelected) {\n      indeterminate = false;\n    } else {\n      indeterminate = instance?.state?.indeterminateRows?.[row.id] ?? false;\n    }\n    return [\n      rowProps,\n      {\n        indeterminate: indeterminate,\n        checked: indeterminate ? true : rowProps.checked\n      }\n    ];\n  };\n\n  const stateReducer = (newState, action, prevState, instance) => {\n    if (action.type === 'INDETERMINATE_ROW_IDS') {\n      let indeterminateRows = {};\n      const allSelectedRows = {};\n      let allSelected = true;\n      let currentDepth = -1;\n\n      instance.flatRows\n        ?.filter((item) => !item.original.emptyRow)\n        .sort((a, b) => b.id.localeCompare(a.id))\n        .map((item) => {\n          if (currentDepth === -1) {\n            currentDepth = item.depth;\n          } else if (currentDepth !== item.depth) {\n            currentDepth = item.depth;\n            if (allSelected && newState.selectedRowIds[item.id]) {\n              allSelectedRows[item.id] = true;\n              delete indeterminateRows[item.id];\n            }\n            allSelected = true;\n          }\n\n          if (newState.selectedRowIds[item.id]) {\n            const parentRowId = item.id.slice(0, item.id.lastIndexOf('.'));\n            if (parentRowId) {\n              indeterminateRows = { ...indeterminateRows, ...getParentIndicesRecursive(item.id) };\n            }\n          } else {\n            allSelected = false;\n          }\n          return item;\n        });\n      return {\n        ...newState,\n        indeterminateRows: indeterminateRows\n      };\n    }\n  };\n\n  const useInstanceAfterData = (instance) => {\n    const {\n      data,\n      dispatch,\n      state: { selectedRowIds },\n      webComponentsReactProperties: { selectionMode, selectionBehavior, isTreeTable }\n    } = instance;\n\n    useEffect(() => {\n      if (\n        isTreeTable &&\n        selectionMode === TableSelectionMode.MultiSelect &&\n        selectionBehavior !== TableSelectionBehavior.RowOnly\n      ) {\n        dispatch({ type: 'INDETERMINATE_ROW_IDS' });\n      }\n    }, [data, selectedRowIds, isTreeTable, selectionMode, selectionBehavior]);\n  };\n\n  const useIndeterminate = (hooks) => {\n    hooks.getToggleRowSelectedProps.push(toggleRowProps);\n    hooks.stateReducers.push(stateReducer);\n    hooks.useInstanceAfterData.push(useInstanceAfterData);\n  };\n\n  useIndeterminate.pluginName = 'useIndeterminate';\n\n  return useIndeterminate;\n};\n"],"names":["reOpenBracket","reCloseBracket","makePathArray","obj","flattenDeep","map","d","String","replace","join","split","arr","newArr","Array","isArray","push","i","length","pathObjCache","Map","getBy","path","def","cacheKey","JSON","stringify","pathObj","get","set","val","reduce","cursor","pathPart","e","customCheckBoxStyling","verticalAlign","headerProps","props","selectionMode","instance","webComponentsReactProperties","key","TableSelectionMode","MultiSelect","onClick","undefined","onKeyDown","columns","column","id","Cell","row","disableSelect","isGrouped","SingleSelect","getToggleRowSelectedProps","Header","useRowDisableSelection","disableRowSelection","disableRowAccessor","original","getRowProps","rowProps","className","classes","tr","columnDeps","deps","useDisableSelectionRow","hooks","getHeaderProps","columnsDeps","pluginName","getParentIndicesRecursive","rowId","parentIndices","getParentIndices","internalRowId","lastDotIndex","lastIndexOf","parentRowId","slice","useIndeterminateRowSelection","toggleRowProps","indeterminate","isAllRowsSelected","state","indeterminateRows","checked","stateReducer","newState","action","prevState","type","allSelectedRows","allSelected","currentDepth","flatRows","filter","item","emptyRow","sort","a","b","localeCompare","depth","selectedRowIds","useInstanceAfterData","data","dispatch","selectionBehavior","isTreeTable","useEffect","TableSelectionBehavior","RowOnly","useIndeterminate","stateReducers"],"mappings":"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"}