{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nimport React, { useEffect, useState } from \"react\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Platform from \"react-native-web/dist/exports/Platform\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport { CheckBox } from \"react-native-elements\";\nimport { useDispatch, useSelector } from 'react-redux';\nimport SearchBarForCheckboxes from \"../components/SearchBarForCheckboxes\";\nimport SelectAllCheckbox from \"../components/SelectAllCheckbox\";\nimport useChecked from \"../hooks/use-checked\";\nimport useSearch from \"../hooks/use-search\";\nimport useSelectAll from \"../hooks/use-select-all\";\nimport style from \"../css/flatlistItem.component.style.js\";\nimport { changeLogActions } from \"../redux/change-log-reducers\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\n\nfunction SalesOrganizationPage(props) {\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      filteredSalesOrganizations = _useState2[0],\n      setFilteredSalesOrganizations = _useState2[1];\n\n  var _useState3 = useState([]),\n      _useState4 = _slicedToArray(_useState3, 2),\n      salesOrganizations = _useState4[0],\n      setSalesOrganizations = _useState4[1];\n\n  var checkedAll = useSelector(function (state) {\n    return state.changeLog.isAllSelected;\n  });\n\n  var _useChecked = useChecked(salesOrganizations, setSalesOrganizations, filteredSalesOrganizations, setFilteredSalesOrganizations),\n      handleOnChange = _useChecked.handleOnChange;\n\n  var _useSearch = useSearch(salesOrganizations, setFilteredSalesOrganizations),\n      searchSalesOrganizationHandler = _useSearch.searchHandler,\n      salesOrganizationValue = _useSearch.searchValue;\n\n  var _useSelectAll = useSelectAll(salesOrganizations, filteredSalesOrganizations, setFilteredSalesOrganizations),\n      handleSelectAll = _useSelectAll.handleSelectAll;\n\n  var dispatch = useDispatch();\n  var baseURL = Platform.OS === \"android\" ? \"http://10.0.2.2:8000/EtVkorgSet\" : \"https://93c3-24-133-107-93.eu.ngrok.io//EtVkorgSet\";\n\n  var ListViewType = function ListViewType(_ref) {\n    var item = _ref.item,\n        index = _ref.index;\n    return _jsx(CheckBox, {\n      containerStyle: style.flatListItem,\n      onPress: function onPress() {\n        return handleOnChange(item.Vkorg);\n      },\n      title: item.Vkorg + \" - \" + item.Vtext,\n      checked: item.checked\n    });\n  };\n\n  var fetchApi = function fetchApi() {\n    var response, salesOrganizationResponse, fetchedSalesOrganizations;\n    return _regeneratorRuntime.async(function fetchApi$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.next = 2;\n            return _regeneratorRuntime.awrap(fetch(baseURL));\n\n          case 2:\n            response = _context.sent;\n            _context.next = 5;\n            return _regeneratorRuntime.awrap(response.json());\n\n          case 5:\n            salesOrganizationResponse = _context.sent;\n\n            try {\n              fetchedSalesOrganizations = salesOrganizationResponse.map(function (salesOrganization) {\n                return _objectSpread(_objectSpread({}, salesOrganization), {}, {\n                  mainAttribute: 'Vkorg',\n                  checked: false,\n                  key: Math.random().toString()\n                });\n              });\n              dispatch(changeLogActions.setFetchedElements(fetchedSalesOrganizations));\n              dispatch(changeLogActions.setCheckedAllAfterRendering(fetchedSalesOrganizations));\n              setSalesOrganizations(fetchedSalesOrganizations);\n              setFilteredSalesOrganizations(fetchedSalesOrganizations);\n            } catch (error) {\n              console.log(error);\n            }\n\n          case 7:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  useEffect(function () {\n    fetchApi();\n    var timer = setTimeout(function () {}, 100);\n    return function () {\n      clearTimeout(timer);\n    };\n  }, []);\n  return _jsxs(View, {\n    flex: 1,\n    children: [_jsx(SearchBarForCheckboxes, {\n      value: salesOrganizationValue,\n      onSearch: searchSalesOrganizationHandler\n    }), _jsx(SelectAllCheckbox, {\n      onChecked: handleSelectAll,\n      isChecked: checkedAll\n    }), _jsx(FlatList, {\n      data: filteredSalesOrganizations,\n      showsHorizontalScrollIndicator: false,\n      alwaysBounceHorizontal: false,\n      keyExtractor: function keyExtractor(item, index) {\n        return \"key\" + index;\n      },\n      renderItem: ListViewType\n    })]\n  });\n}\n\nexport default SalesOrganizationPage;","map":{"version":3,"names":["React","useEffect","useState","CheckBox","useDispatch","useSelector","SearchBarForCheckboxes","SelectAllCheckbox","useChecked","useSearch","useSelectAll","style","changeLogActions","SalesOrganizationPage","props","filteredSalesOrganizations","setFilteredSalesOrganizations","salesOrganizations","setSalesOrganizations","checkedAll","state","changeLog","isAllSelected","handleOnChange","searchSalesOrganizationHandler","searchHandler","salesOrganizationValue","searchValue","handleSelectAll","dispatch","baseURL","Platform","OS","ListViewType","item","index","flatListItem","Vkorg","Vtext","checked","fetchApi","fetch","response","json","salesOrganizationResponse","fetchedSalesOrganizations","map","salesOrganization","mainAttribute","key","Math","random","toString","setFetchedElements","setCheckedAllAfterRendering","error","console","log","timer","setTimeout","clearTimeout"],"sources":["C:/Users/T470/Desktop/Programming/MedepiaChangeLogMobileApp/assets/screens/SalesOrganizationPage.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { View, Platform, FlatList } from \"react-native\";\r\nimport { CheckBox } from \"react-native-elements\";\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport SearchBarForCheckboxes from \"../components/SearchBarForCheckboxes\";\r\nimport SelectAllCheckbox from \"../components/SelectAllCheckbox\";\r\nimport useChecked from \"../hooks/use-checked\";\r\nimport useSearch from \"../hooks/use-search\";\r\nimport useSelectAll from \"../hooks/use-select-all\";\r\nimport style from '../css/flatlistItem.component.style.js';\r\nimport { changeLogActions } from '../redux/change-log-reducers';\r\n\r\nfunction SalesOrganizationPage(props) {\r\n  const [filteredSalesOrganizations, setFilteredSalesOrganizations] = useState([]);\r\n  const [salesOrganizations, setSalesOrganizations] = useState([]);\r\n\r\n  const checkedAll = useSelector(state => state.changeLog.isAllSelected)\r\n  const { handleOnChange: handleOnChange } = useChecked(salesOrganizations, setSalesOrganizations, filteredSalesOrganizations, setFilteredSalesOrganizations)\r\n  const { searchHandler: searchSalesOrganizationHandler, searchValue: salesOrganizationValue } = useSearch(salesOrganizations, setFilteredSalesOrganizations)\r\n  const { handleSelectAll: handleSelectAll } = useSelectAll(salesOrganizations, filteredSalesOrganizations, setFilteredSalesOrganizations)\r\n  const dispatch = useDispatch()\r\n\r\n  var baseURL = Platform.OS === \"android\" ? \"http://10.0.2.2:8000/EtVkorgSet\" : \"https://93c3-24-133-107-93.eu.ngrok.io//EtVkorgSet\"\r\n\r\n  const ListViewType = ({ item, index }) => {\r\n    return (\r\n      // Flat List Item\r\n      <CheckBox\r\n        containerStyle={style.flatListItem}\r\n        onPress={() => handleOnChange(item.Vkorg)}\r\n        title={item.Vkorg + \" - \" + item.Vtext}\r\n        checked={item.checked}\r\n      />\r\n    );\r\n  };\r\n\r\n  const fetchApi = async () => {\r\n    const response = await fetch(baseURL)\r\n    const salesOrganizationResponse = await response.json()\r\n    \r\n    try {\r\n      const fetchedSalesOrganizations = salesOrganizationResponse.map(salesOrganization => (\r\n          {\r\n            ...salesOrganization,\r\n            mainAttribute: 'Vkorg',\r\n            checked: false,\r\n            key:Math.random().toString()\r\n          }\r\n        )\r\n      )\r\n\r\n      dispatch(changeLogActions.setFetchedElements(fetchedSalesOrganizations))\r\n      dispatch(changeLogActions.setCheckedAllAfterRendering(fetchedSalesOrganizations))\r\n      setSalesOrganizations(fetchedSalesOrganizations)\r\n      setFilteredSalesOrganizations(fetchedSalesOrganizations)\r\n\r\n    } catch (error) {\r\n      console.log(error)\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchApi();\r\n    const timer = setTimeout(() => {\r\n    }, 100)\r\n\r\n    return () => {\r\n      clearTimeout(timer)\r\n    }    \r\n  }, []);\r\n\r\n\r\n  return (\r\n    <View flex={1}>\r\n      <SearchBarForCheckboxes value={salesOrganizationValue} onSearch={searchSalesOrganizationHandler} />\r\n      <SelectAllCheckbox onChecked={handleSelectAll} isChecked={checkedAll} />\r\n        <FlatList\r\n          data={filteredSalesOrganizations}\r\n          showsHorizontalScrollIndicator={false}\r\n          alwaysBounceHorizontal={false}\r\n          keyExtractor={(item, index) => \"key\" + index}\r\n          renderItem={ListViewType} />\r\n    </View>\r\n  );\r\n}\r\n\r\nexport default SalesOrganizationPage;"],"mappings":"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"},"metadata":{},"sourceType":"module"}